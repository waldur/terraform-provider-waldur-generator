package {{ .Package }}

import (
	"os"
	"time"

	"github.com/hashicorp/terraform-plugin-framework/types"
)

var (
	DefaultCreateTimeout = 15 * time.Minute
	DefaultUpdateTimeout = 15 * time.Minute
	DefaultDeleteTimeout = 15 * time.Minute
	DefaultActionTimeout = 15 * time.Minute
	DefaultPollDelay     = 10 * time.Second
	DefaultPollMinTimeout = 5 * time.Second
)

func init() {
	if delay := os.Getenv("WALDUR_POLL_DELAY"); delay != "" {
		if d, err := time.ParseDuration(delay); err == nil {
			DefaultPollDelay = d
		}
	}
	if timeout := os.Getenv("WALDUR_POLL_MIN_TIMEOUT"); timeout != "" {
		if t, err := time.ParseDuration(timeout); err == nil {
			DefaultPollMinTimeout = t
		}
	}
}
{{ range .Structs }}
{{ $struct := . }}
{{ if eq .GoType "types.String" }}
type {{ .RefName }} string

const (
{{- range .Enum }}
	{{ $struct.RefName }}{{ . | title | replace "-" "" | replace " " "" }} {{ $struct.RefName }} = "{{ . }}"
{{- end }}
)
{{ else }}
type {{ .RefName }} struct {
	{{ template "apiRequestStructFields" dict "Fields" .Properties "Prefix" .RefName "Package" "common" }}
}
{{ template "apiRequestNestedStructs" dict "Fields" .Properties "Prefix" .RefName "Package" "common" }}
{{ end }}
{{ end }}
